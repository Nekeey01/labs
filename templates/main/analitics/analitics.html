{% extends 'main/base.html' %}
{% load static %}

{% block title %}
    {{ title }}
{% endblock %}

{% block cssfiles %}
    <link type="text/css"
          href="{% static 'css/analiticstyli.css' %}"
          rel="stylesheet"/>

{% endblock %}

{% block content %}

<div class="container">
    <div class="card mt-4">
        <div class="card-header">
            <i class="fas fa-chart-area me-1 text-center"></i>
            Количество заказанных лабораторий в день
        </div>
        <div class="card-body">
            <canvas id="rasxodChart" width="100%" height="30"></canvas></div>
            <script>
                const ctx = document.getElementById('rasxodChart').getContext('2d');
                const rasxodChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [{%for data in qs%} '{{ data|date:'d E Y года' }}', {%endfor%}],
                        datasets: [{
                            label: 'Заказы',
                            data: [{%for data in qs2%} '{{ data.count_reslabs }}', {%endfor%}],
                            lineTension: 0.3,
                            backgroundColor: "rgba(2,117,216,0.2)",
                            borderColor: "rgba(2,117,216,1)",
                            pointRadius: 5,
                            fill: false,
                            pointBackgroundColor: "rgba(2,117,216,1)",
                            pointBorderColor: "rgba(255,255,255,0.8)",
                            pointHoverRadius: 5,
                            pointHoverBackgroundColor: "rgba(2,117,216,1)",
                            pointHitRadius: 50,
                            pointBorderWidth: 2,
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        legend: {
                          display: false
                        }
                    }
                });
            </script>
    </div>
    <hr>
    <div class="card mt-4">
        <div class="card-header">
            <i class="fas fa-chart-area me-1 text-center"></i>
            Анализ количества определенных заявок
        </div>
        <div class="card-body">
            <canvas id="poChart" width="100%" height="40"></canvas></div>
            <script>
                const ctx2 = document.getElementById('poChart').getContext('2d');
                var myPieChart = new Chart(ctx2, {
                          type: 'doughnut',
                          data: {
                            labels: [{%for data in qss%} '{{ data }}', {%endfor%}],
                            datasets: [{
                              data: [{%for data in qss2%} '{{ data.count_zayavok }}', {%endfor%}],
                              backgroundColor: ['#ffc107', '#28a745',  '#c6b065','#dc3545',
                                  '#d57a81' ],
                            }],
                          },
                        });
            </script>
    </div>
    <hr>

</div>
{% endblock %}